<model>
	<layout>
		<section id = "u001" type="switch">
			<prevsections> </prevsections>
			<nextsec>u002</nextsec>
			<circuit>0</circuit>
			<moduleid>3</moduleid>
			<moduleposition>0</moduleposition>
		</section>
		<section id = "u002" type="switch">
			<prevsec>u001</prevsec>
			<nextsections>
				<nextsec1>u010</nextsec1>
				<nextsec2>u003</nextsec2>
			</nextsections>
			<circuit>0</circuit>
			<moduleid>3</moduleid>
			<moduleposition>1</moduleposition>
		</section>
		<section id = "u003" type="switch">
			<prevsections>
				<prevsec1>u002</prevsec1>
				<prevsec2>u012</prevsec2>
			</prevsections>
			<nextsec>u004</nextsec>
			<circuit>0</circuit>
			<moduleid>3</moduleid>
			<moduleposition>2</moduleposition>
		</section>
		<section id = "u004" type="switch">
			<prevsec>u003</prevsec>
			<nextsec>u018</nextsec>
			<circuit>1</circuit>
			<moduleid>3</moduleid>
			<moduleposition>3</moduleposition>
		</section>
		<section id = "u005" type="track">
			<prevsec>u_beroun</prevsec>
			<nextsec>u006</nextsec>
			<circuit>3</circuit>
			<moduleid>3</moduleid>
			<moduleposition>4</moduleposition>
		</section>
		<section id = "u006" type="track">
			<prevsec>u005</prevsec>
			<nextsec>u007</nextsec>
			<circuit>3</circuit>
			<moduleid>3</moduleid>
			<moduleposition>5</moduleposition>
		</section>
		<section id = "u007" type="track">
			<prevsec>u006</prevsec>
			<nextsec>u008</nextsec>
			<circuit>3</circuit>
			<moduleid>3</moduleid>
			<moduleposition>6</moduleposition>
		</section>
		<section id = "u008" type="track">
			<prevsec>u007</prevsec>
			<nextsec>u021</nextsec>
			<circuit>3</circuit>
			<moduleid>3</moduleid>
			<moduleposition>7</moduleposition>
		</section>
		<section id = "u009" type="switch">
			<prevsections>
			</prevsections>
			<nextsec>u010</nextsec>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>0</moduleposition>
		</section>
		<section id = "u010" type="switch">
			<prevsections>
				<prevsec1>u002</prevsec1>
				<prevsec2>u009</prevsec2>
			</prevsections>
			<nextsec>u011</nextsec>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>1</moduleposition>
		</section>
		<section id = "u011" type="switch">
			<prevsec>u010</prevsec>
			<nextsections>
				<nextsec1>u012</nextsec1>
				<nextsec2>u014</nextsec2>
			</nextsections>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>2</moduleposition>
		</section>
		<section id = "u012" type="switch">
			<prevsec>u011</prevsec>
			<nextsections>
				<nextsec1>u003</nextsec1>
				<nextsec2>u013</nextsec2>
			</nextsections>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>3</moduleposition>
		</section>
		<section id = "u013" type="track">
			<prevsec>u012</prevsec>
			<nextsec>u017</nextsec>
			<circuit>2</circuit>
			<moduleid>2</moduleid>
			<moduleposition>4</moduleposition>
		</section>
		<section id = "u014" type="track">
			<prevsec>u011</prevsec>
			<nextsec>u015</nextsec>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>5</moduleposition>
		</section>
		<section id = "u015" type="track">
			<prevsec>u014</prevsec>
			<nextsec>u016</nextsec>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>6</moduleposition>
		</section>
		<section id = "u016" type="track">
			<prevsec>u015</prevsec>
			<nextsec></nextsec>
			<circuit>0</circuit>
			<moduleid>2</moduleid>
			<moduleposition>7</moduleposition>
		</section>
		<section id = "u017" type="track">
			<prevsec>u013</prevsec>
			<nextsec>u019</nextsec>
			<circuit>2</circuit>
			<moduleid>1</moduleid>
			<moduleposition>0</moduleposition>
		</section>
		<section id = "u018" type="track">
			<prevsec>u004</prevsec>
			<nextsec>u020</nextsec>
			<circuit>1</circuit>
			<moduleid>1</moduleid>
			<moduleposition>1</moduleposition>
		</section>
		<section id = "u019" type="track">
			<prevsec>u017</prevsec>
			<nextsec>u023</nextsec>
			<circuit>2</circuit>
			<moduleid>1</moduleid>
			<moduleposition>2</moduleposition>
		</section>
		<section id = "u020" type="track">
			<prevsec>u018</prevsec>
			<nextsec>u024</nextsec>
			<circuit>1</circuit>
			<moduleid>1</moduleid>
			<moduleposition>3</moduleposition>
		</section>
		<section id = "u021" type="track">
			<prevsec>u008</prevsec>
			<nextsec>u022</nextsec>
			<circuit>3</circuit>
			<moduleid>1</moduleid>
			<moduleposition>4</moduleposition>
		</section>
		<section id = "u022" type="track">
			<prevsec>u021</prevsec>
			<nextsec>u029</nextsec>
			<circuit>3</circuit>
			<moduleid>1</moduleid>
			<moduleposition>5</moduleposition>
		</section>
		<section id = "u023" type="track">
			<prevsec>u019</prevsec>
			<nextsec>u025</nextsec>
			<circuit>2</circuit>
			<moduleid>1</moduleid>
			<moduleposition>6</moduleposition>
		</section>
		<section id = "u024" type="track">
			<prevsec>u020</prevsec>
			<nextsec>u026</nextsec>
			<circuit>1</circuit>
			<moduleid>1</moduleid>
			<moduleposition>7</moduleposition>
		</section>
		<section id = "u025" type="track">
			<prevsec>u023</prevsec>
			<nextsec>u027</nextsec>
			<circuit>2</circuit>
			<moduleid>4</moduleid>
			<moduleposition>0</moduleposition>
		</section>
		<section id = "u026" type="track">
			<prevsec>u024</prevsec>
			<nextsec>u028</nextsec>
			<circuit>1</circuit>
			<moduleid>4</moduleid>
			<moduleposition>1</moduleposition>
		</section>
		<section id = "u027" type="track">
			<prevsec>u025</prevsec>
			<nextsec>u031</nextsec>
			<circuit>2</circuit>
			<moduleid>4</moduleid>
			<moduleposition>2</moduleposition>
		</section>
		<section id = "u028" type="track">
			<prevsec>u026</prevsec>
			<nextsec>u032</nextsec>
			<circuit>1</circuit>
			<moduleid>4</moduleid>
			<moduleposition>3</moduleposition>
		</section>
		<section id = "u029" type="track">
			<prevsec>u022</prevsec>
			<nextsec>u030</nextsec>
			<circuit>3</circuit>
			<moduleid>4</moduleid>
			<moduleposition>4</moduleposition>
		</section>
		<section id = "u030" type="track">
			<prevsec>u029</prevsec>
			<nextsec>u_okruh3</nextsec>
			<circuit>3</circuit>
			<moduleid>4</moduleid>
			<moduleposition>5</moduleposition>
		</section>
		<section id = "u031" type="track">
			<prevsec>u027</prevsec>
			<nextsec>u_okruh2</nextsec>
			<circuit>2</circuit>
			<moduleid>4</moduleid>
			<moduleposition>6</moduleposition>
		</section>
		<section id = "u032" type="track">
			<prevsec>u028</prevsec>
			<nextsec>u_okruh1</nextsec>
			<circuit>1</circuit>
			<moduleid>4</moduleid>
			<moduleposition>7</moduleposition>
		</section>
		
	</layout>

	<routes>
		<!-- Predefined routes for Beroun -->
		<from id = "u013">
			<to id = "Beroun_kolej_2">
				<parts>
					<part1>u012</part1>
					<part2>u011</part2>
					<part3>u010</part3>
					<part4>u002</part4>
					<part5>u001</part5>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>29</turnouts>
						<value>25</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_4">
				<parts>
					<part1>u012</part1>
					<part2>u011</part2>
					<part3>u010</part3>
					<part4>u002</part4>
					<part5>u001</part5>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>221</turnouts>
						<value>93</value>
					</unit1>
					<unit2>
						<unit>2</unit>
						<turnouts>100</turnouts>
						<value>150</value>
					</unit2>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_6">
				<parts>
					<part1>u012</part1>
					<part2>u011</part2>
					<part3>u010</part3>
					<part4>u002</part4>
					<part5>u001</part5>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>221</turnouts>
						<value>221</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_1">
				<parts>
					<part1>u012</part1>
					<part2>u011</part2>
					<part3>u010</part3>
					<part4>u009</part4>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>26</turnouts>
						<value>18</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_3">
				<parts>
					<part1>u012</part1>
					<part2>u011</part2>
					<part3>u010</part3>
					<part4>u009</part4>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>26</turnouts>
						<value>16</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
		</from>
		<from id = "u004">
			<to id = "Beroun_kolej_1">
				<parts>
					<part1>u003</part1>
					<part2>u012</part2>
					<part3>u011</part3>
					<part4>u010</part4>
					<part5>u009</part5>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>26</turnouts>
						<value>1</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_3">
				<parts>
					<part1>u003</part1>
					<part2>u012</part2>
					<part3>u011</part3>
					<part4>u010</part4>
					<part5>u009</part5>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>26</turnouts>
						<value>0</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_2">
				<parts>
					<part1>u003</part1>
					<part2>u002</part2>
					<part3>u001</part3>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>37</turnouts>
						<value>32</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_4">
				<parts>
					<part1>u003</part1>
					<part2>u002</part2>
					<part3>u001</part3>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>229</turnouts>
						<value>100</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_6">
				<parts>
					<part1>u003</part1>
					<part2>u002</part2>
					<part3>u001</part3>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>221</turnouts>
						<value>217</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Karlstejn</fromStart>
				<circuit>0</circuit>
			</to>
		</from>
		<from id = "u006">
			<to id = "Beroun_kolej_4">
				<parts>
					<part1>u005</part1>
					<part2>Beroun_entry</part2>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>192</turnouts>
						<value>0</value>
					</unit1>
					<unit2>
						<unit>2</unit>
						<turnouts>100</turnouts>
						<value>150</value>
					</unit2>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Lhota</fromStart>
				<circuit>0</circuit>
			</to>
			<to id = "Beroun_kolej_6">
				<parts>
					<part1>u007</part1>
					<part2>u006</part2>
					<part3>u005</part3>
				</parts>
				<switches>
					<unit1>
						<unit>1</unit>
						<turnouts>192</turnouts>
						<value>128</value>
					</unit1>
				</switches>
				<toFinal>Beroun</toFinal>
				<fromStart>Lhota</fromStart>
				<circuit>0</circuit>
			</to>
		</from>
	</routes>
	
	<!-- Predefined circuits between stations -->
	<circuits>
		<cir id = "1">
			<fromStartOutside id = "Beroun">
				<items>
					<item1>u003</item1>
					<item2>u004</item2>
					<item3>u018</item3>
					<item4>u020</item4>
					<item5>u024</item5>
					<item6>u026</item6>
					<item7>u028</item7>
					<item8>u032</item8>
				</items>
				<toFinalPosition>Karlstejn</toFinalPosition>
			</fromStartOutside>
			<fromStartOutside id = "Karlstejn">
				<items>
					<item8>u032</item8>
					<item7>u028</item7>
					<item6>u026</item6>
					<item5>u024</item5>
					<item4>u020</item4>
					<item3>u018</item3>
					<item2>u004</item2>
					<item1>u003</item1>
				</items>
				<toFinalPosition>Beroun</toFinalPosition>
			</fromStartOutside>
		</cir>
		<cir id = "2">
			<fromStartOutside id = "Beroun">
				<items>
					<item1>u012</item1>
					<item2>u013</item2>
					<item3>u017</item3>
					<item4>u019</item4>
					<item5>u023</item5>
					<item6>u025</item6>
					<item7>u027</item7>
					<item8>u031</item8>
				</items>
				<toFinalPosition>Karlstejn</toFinalPosition>
			</fromStartOutside>
			<fromStartOutside id = "Karlstejn">
				<items>
					<item8>u031</item8>
					<item7>u027</item7>
					<item6>u025</item6>
					<item5>u023</item5>
					<item4>u019</item4>
					<item3>u017</item3>
					<item2>u013</item2>
					<item1>u012</item1>
				</items>
				<toFinalPosition>Beroun</toFinalPosition>
			</fromStartOutside>
		</cir>
		<cir id = "3">
			<fromStartOutside id = "Beroun">
				<items>
					<item1>u005</item1>
					<item2>u006</item2>
					<item3>u007</item3>
					<item4>u008</item4>
					<item5>u021</item5>
					<item6>u022</item6>
					<item7>u029</item7>
					<item8>u030</item8>
				</items>
				<toFinalPosition>Lhota</toFinalPosition>
			</fromStartOutside>
			<fromStartOutside id = "Lhota">
				<items>
					<item8>u030</item8>
					<item7>u029</item7>
					<item6>u022</item6>
					<item5>u021</item5>
					<item4>u008</item4>
					<item3>u007</item3>
					<item2>u006</item2>
					<item1>u005</item1>
				</items>
				<toFinalPosition>Beroun</toFinalPosition>
			</fromStartOutside>
		</cir>
	</circuits>

	<!-- Predefined critical routes -->
	<criticalroutes>
		<crit id = "cr1">
			<last>u_okruh2</last>
			<current>u013</current>
		</crit>
		<crit id = "cr2">
			<last>u_okruh1</last>
			<current>u004</current>
		</crit>
		<crit id = "cr2">
			<last>u007</last>
			<current>u006</current>
		</crit>
	</criticalroutes>



	<!-- Definitions of possible final stations and tracks-->
	<circuitsToFinal>
		<fromCircuit id = "0">
			<toCircuit name ="Lhota">
				<item1>LhotaOsazena1</item1>
				<item2>LhotaOsazena2</item2>
			</toCircuit>
			<toCircuit name ="Beroun">
				<item1>Beroun_kolej_1</item1>
				<item2>Beroun_kolej_3</item2>
				<item3>Beroun_kolej_2</item3>
				<item4>Beroun_kolej_4</item4>
				<item5>Beroun_kolej_6</item5>
			</toCircuit>
			<toCircuit name = "Karlstejn">
				<item1>KarlstejnOsazena1</item1>
				<item2>KarlstejnOsazena2</item2>
			</toCircuit>
		</fromCircuit>
		<fromCircuit id = "1">
			<toCircuit name = "Beroun">
				<item1>Beroun_kolej_1</item1>
				<item2>Beroun_kolej_3</item2>
				<item3>Beroun_kolej_2</item3>
				<item4>Beroun_kolej_4</item4>
				<item5>Beroun_kolej_6</item5>
			</toCircuit>
			<toCircuit name = "Karlstejn">
				<item1>KarlstejnOsazena1</item1>
				<item2>KarlstejnOsazena2</item2>
			</toCircuit>
		</fromCircuit>
		<fromCircuit id = "2">
			<toCircuit name = "Beroun">
				<item1>Beroun_kolej_1</item1>
				<item2>Beroun_kolej_3</item2>
				<item3>Beroun_kolej_2</item3>
				<item4>Beroun_kolej_4</item4>
				<item5>Beroun_kolej_6</item5>
			</toCircuit>
			<toCircuit name ="Karlstejn">
				<item1>KarlstejnOsazena1</item1>
				<item2>KarlstejnOsazena2</item2>
			</toCircuit>
		</fromCircuit>
		<fromCircuit id = "3">
			<toCircuit name = "Beroun">
				<item1>Beroun_kolej_2</item1>
				<item2>Beroun_kolej_4</item2>
				<item3>Beroun_kolej_6</item3>
			</toCircuit>
			<toCircuit name ="Lhota">
				<item1>LhotaOsazena1</item1>
				<item2>LhotaOsazena2</item2>
			</toCircuit>
		</fromCircuit>
	</circuitsToFinal>



	<!-- Definition of tracks for every station -->
	<stationTracks>
		<Beroun>
			<item2>Beroun_kolej_1</item2>
			<item3>Beroun_kolej_2</item3>
			<item4>Beroun_kolej_3</item4>
			<item5>Beroun_kolej_4</item5>
			<item6>Beroun_kolej_5</item6>
		</Beroun>
		<Karlstejn>
			<item2>KarlstejnOsazena1</item2>
			<item3>KarlstejnOsazena2</item3>
		</Karlstejn>
	</stationTracks>
	
	<turnoutStopDefinitions>
		<item1>
			<unit>1</unit>
			<pos>0</pos>
			<leftStop>90</leftStop>
			<rightStop>110</rightStop>
		</item1>
		<item2>
			<unit>1</unit>
			<pos>1</pos>
			<leftStop>90</leftStop>
			<rightStop>110</rightStop>
		</item2>
		<item3>
			<unit>1</unit>
			<pos>2</pos>
			<leftStop>100</leftStop>
			<rightStop>130</rightStop>
		</item3>
		<item4>
			<unit>1</unit>
			<pos>3</pos>
			<leftStop>100</leftStop>
			<rightStop>130</rightStop>
		</item4>
		<item5>
			<unit>1</unit>
			<pos>4</pos>
			<leftStop>100</leftStop>
			<rightStop>130</rightStop>
		</item5>
	</turnoutStopDefinitions>
</model>